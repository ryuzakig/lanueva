<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>La Nueva Online</title>
    <link rel="stylesheet" href="bulma.min.css" />
    <style>
      .column {
        display: flex;
        justify-content: center;
      }

      .button {
        margin-bottom: 10px;
      }
      .card {
        font-weight: bold;
      }
      .card .card-content {
        background-color: rgba(50, 152, 220, 0.2);
      }
      .card .card-footer {
        background-color: rgba(0, 209, 178, 0.2);
      }
      @media screen and (min-width: 769px) {
        .column.is-one-third {
          flex: none;
          width: 50%;
        }
      }

      @media screen and (min-width: 1087px) {
        .column.is-one-third {
          flex: none;
          width: 33.333%;
        }
      }
    </style>
  </head>

  <body>
    <section class="hero is-medium is-primary is-bold">
      <div class="hero-body">
        <div class="container">
          <h1 class="title">
            La Nueva Online
          </h1>
          <h2 class="subtitle">
            Directorio de restaurantes, clinicas, negocios y más ...
          </h2>
        </div>
      </div>
    </section>
    <br />

    <!-- contenedor -->
    <div class="container contenedor has-text-centered" data-ref="container">
      <button class="button is-primary" type="button" data-filter="all">
        Todos
      </button>
      <button class="button is-primary" type="button" data-filter=".comida">
        Comida
      </button>
      <button class="button is-primary" type="button" data-filter=".frutas">
        Frutas
      </button>
      <button class="button is-primary" type="button" data-filter=".verdura">
        Verduras
      </button>
      <button class="button is-primary" type="button" data-filter=".pupuseria">
        Pupuseria
      </button>
      <button class="button is-primary" type="button" data-filter=".postres">
        Postres
      </button>
      <button class="button is-primary" type="button" data-filter=".antojitos">
        Antojitos
      </button>
      <button class="button is-primary" type="button" data-filter=".variedades">
        Variedades
      </button>
      <button class="button is-primary" type="button" data-filter=".salud">
        Salud
      </button>
      <button
        class="button is-primary"
        type="button"
        data-filter=".cosmetologia"
      >
        Cosmetologia
      </button>
      <br />
      <br />
      <div class="">
        <ul>
          <div class="columns is-multiline is-centered"></div>
        </ul>
      </div>
    </div>

    <footer class="footer">
      <div class="content has-text-centered">
        <p>
          <strong>La Nueva Online</strong>. Directorio de restaurantes,
          clinicas, negocios y más ...
        </p>
      </div>
    </footer>

    <script src="mixitup.min.js"></script>
    <script>
      function crearLista() {
        const columnas = document.querySelector(".columns");

        const request = new XMLHttpRequest();
        request.open("GET", "data.json", true);
        request.responseType = "json";
        request.send();

        request.onload = function () {
          const data = request.response;
          const directorio = data["DIRECTORIO"];

          for (var i = 0; i < directorio.length; i++) {
            const negocio = document.createElement("li");
            negocio.classList.add(
              "column",
              "is-one-third",
              "mix",
              directorio[i]["CATEGORIA"]
            );
            negocio.innerHTML =
              '<div class="card"><div class="card-content"><p class="title">' +
              directorio[i]["NOMBRE"] +
              '</p><p class="subtitle">' +
              directorio[i]["PRODUCTOS"] +
              '</p></div><footer class="card-footer"><p class="card-footer-item"><span>Teléfono: <br/><a href="tel:+503' +
              directorio[i]["TELEFONO"].replace("-", "") +
              '">' +
              directorio[i]["TELEFONO"] +
              '</a></span></p><p class="card-footer-item"><span>Servicio: <br/>' +
              directorio[i]["SERVICIO"] +
              '</span></p><p class="card-footer-item"><span>Horario:<br/>' +
              directorio[i]["HORARIO"] +
              "</span></p></footer></div>";
            columnas.appendChild(negocio);
          }
        };
      }

      function ordenar() {
        var container = document.querySelector('[data-ref="container"]');
        var config = {
          layout: {
            allowNestedTargets: true,
          },
        };

        var mixer = mixitup(container, config);
      }

      cargar();

      function cargar() {
        crearLista();
        setTimeout(ordenar, 50);
      }
    </script>
  </body>
</html>
